(()=>{"use strict";class e{static createGameBoard(e){for(let t=0;t<100;t++){const o=document.createElement("div");o.classList.add("grid"),o.setAttribute("id",`${t}`),o.textContent=t,e.appendChild(o)}}static isShipDeployable(e,t,o){const r=document.getElementById("player-game-board"),a=e+t-1;let l=[e];for(let r=1;r<t;r++){let t;t="horizontal"===o?e+r:e+10*r,l.push(t)}return!(l.some((e=>e>99||"black"===r.childNodes[e].style.backgroundColor))||"horizontal"===o&&e<10&&e.toString().length!==a.toString().length||"horizontal"===o&&e>9&&e.toString().split("")[0]!==a.toString().split("")[0])}}class t{constructor(e,t){this.shipType=e,this.length=t,this.rotation="vertical"}static createShipArray(){return[new t("submarine",2),new t("destroyer",3),new t("destroyer",3),new t("cruiser",4),new t("carrier",5)]}}const o=t.createShipArray();class r{static createPlayerGameBoard(){const t=document.getElementById("player-game-board");t.classList.add("game-board"),e.createGameBoard(t)}static setGridColor(e,t,o,r,a){const l=document.getElementById("player-game-board");for(let i=1;i<t;i++){let t;t="horizontal"===o?e+i:e+10*i,l.childNodes[e].style.backgroundColor=r,l.childNodes[t].style.backgroundColor=r,a&&(l.childNodes[e].style.color=a),l.childNodes[t].style.color=a}}static setShipInfo(e){let t=document.querySelector(".ship-info-text"),o=document.querySelector(".ship-img");t.textContent=e[0].toUpperCase()+e.slice(1),o.src=`/dist/img/${e}.png`,o.alt=`${e} image`}static switchShipRotation(){document.getElementById("rotate-button").addEventListener("click",(()=>{o.map((e=>"vertical"===e.rotation?e.rotation="horizontal":e.rotation="vertical"))}))}static deployShip(){document.querySelectorAll(".grid").forEach((t=>t.addEventListener("click",(()=>{const r=Number(t.id);o[0]&&e.isShipDeployable(r,o[0].length,o[0].rotation)&&(this.setGridColor(r,o[0].length,o[0].rotation,"black","white"),o.shift(),o[0]&&this.setShipInfo(o[0].shipType))}))))}static gridHoverEffects(){const t=document.querySelectorAll(".grid");t.forEach((t=>{t.addEventListener("mouseover",(()=>{const r=Number(t.id);o[0]&&e.isShipDeployable(r,o[0].length,o[0].rotation)&&this.setGridColor(r,o[0].length,o[0].rotation,"gray")}))})),t.forEach((t=>t.addEventListener("mouseout",(()=>{const r=Number(t.id);o[0]&&e.isShipDeployable(r,o[0].length,o[0].rotation)&&this.setGridColor(r,o[0].length,o[0].rotation,"white")}))))}static endDeploymentPhase(){const e=document.querySelectorAll(".grid"),t=document.getElementById("modal-ship-info"),r=document.getElementById("player-game-board"),a=document.getElementById("rotate-button"),l=document.querySelectorAll(".gameboard-title"),i=document.getElementById("player-gameboard-main"),n=document.getElementById("computer-gameboard-main");e.forEach((e=>e.addEventListener("click",(()=>{if(0===o.length){for(let e=0;e<100;e++)"black"!==r.childNodes[e].style.backgroundColor&&(r.childNodes[e].textContent="");l.forEach((e=>e.style.display="block")),i.style.transform="translate(-100%)",i.style.animation="slide-left 1s",n.style.display="flex",n.style.flexDirection="column",t.style.display="none",a.style.display="none"}}))))}}class a{static createComputerGameBoard(){const t=document.getElementById("computer-game-board");t.classList.add("game-board"),e.createGameBoard(t);for(let e=0;e<100;e++)t.childNodes[e].textContent=""}static getPlayerCoordinates(){const e=document.querySelectorAll(".grid");let t=[];return e.forEach((e=>{"black"===e.style.backgroundColor&&t.push(e.id)})),t}static deployComputerShips(){document.getElementById("computer-game-board").childNodes.forEach((e=>e.addEventListener("click",(()=>{console.log(e.id)}))))}}r.createPlayerGameBoard(),r.switchShipRotation(),r.gridHoverEffects(),r.deployShip(),r.endDeploymentPhase(),a.createComputerGameBoard(),a.deployComputerShips()})();