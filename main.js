(()=>{"use strict";class t{static createGameBoard(t){for(let e=0;e<100;e++){const o=document.createElement("div");o.classList.add("grid"),o.textContent=e,t.appendChild(o)}}static isShipDeployable(t,e,o){const r=document.getElementById("modal-game-board"),i=t+e-1;let s=[t];for(let r=1;r<e;r++){let e;e="horizontal"===o?t+r:t+10*r,s.push(e)}return!(s.some((t=>t>99||"orange"===r.childNodes[t].style.backgroundColor))||"horizontal"===o&&t<10&&t.toString().length!==i.toString().length||"horizontal"===o&&t>9&&t.toString().split("")[0]!==i.toString().split("")[0])}}class e{constructor(t,e){this.shipType=t,this.length=e,this.health=e,this.rotation="vertical",this.isSunk=!1}static createShipObject(){return[new e("submarine",2),new e("destroyer",3),new e("destroyer",3),new e("cruiser",4),new e("carrier",5)]}}class o{static createModalGameBoard(){const e=document.getElementById("modal-game-board");e.classList.add("game-board"),t.createGameBoard(e)}static deployShip(){const o=document.querySelectorAll(".grid"),r=e.createShipObject();o.forEach((t=>t.addEventListener("mouseout",(()=>{r[0]&&this.gridMouseActions(r[0].length,r[0].rotation)})))),o.forEach((e=>e.addEventListener("click",(()=>{const o=Number(e.textContent);r[0]&&t.isShipDeployable(o,r[0].length,r[0].rotation)&&(this.setGridColor(o,r[0].length,r[0].rotation,"orange"),r.shift(),r[0]&&this.setShipInfo(r[0].shipType))}))))}static switchShipRotation(){document.getElementById("rotate-button").addEventListener("click",(()=>{e.createShipObject()}))}static setGridColor(t,e,o,r){const i=document.getElementById("modal-game-board");for(let s=1;s<e;s++){let e;e="horizontal"===o?t+s:t+10*s,i.childNodes[t].style.backgroundColor=r,i.childNodes[e].style.backgroundColor=r}}static setShipInfo(t){let e=document.querySelector(".ship-info-text"),o=document.querySelector(".ship-img");e.textContent=t[0].toUpperCase()+t.slice(1),o.src=`/dist/img/${t}.png`,o.alt=`${t} image`}static gridMouseActions(e,o){const r=document.querySelectorAll(".grid");r.forEach((r=>{r.addEventListener("mouseover",(()=>{const i=Number(r.textContent);t.isShipDeployable(i,e,o)&&this.setGridColor(i,e,o,"rgba(0,0,0,.5)")}))})),r.forEach((r=>r.addEventListener("mouseout",(()=>{const i=Number(r.textContent);t.isShipDeployable(i,e,o)&&this.setGridColor(i,e,o,"white")}))))}}o.createModalGameBoard(),o.deployShip()})();